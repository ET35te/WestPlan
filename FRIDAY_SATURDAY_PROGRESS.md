# 📊 周五周六 任务进度与详情

**更新时间**: 2026年1月2日 09:00  
**冲刺进度**: 第 2 天/4 天

---

## 📅 周五 (今天) 进度报告

### 上午 - 存档系统测试

**状态**: ⏳ **未开始** → 🟡 **部分发现问题**

| 任务 | 状态 | 进度 | 备注 |
|------|------|------|------|
| 保存功能验证 | ⏳ | 0% | 需测试 Save/Load 流程 |
| 加载功能验证 | ⏳ | 0% | 需验证数据完整性 |
| 数据完整性检查 | ⏳ | 0% | Belief/Grain/Armor 数值是否保持 |

### 下午 - 胜利界面优化 & 飘字系统

**状态**: 🟡 **发现问题** → 正在诊断

| 任务 | 状态 | 进度 | 问题 |
|------|------|------|------|
| 飘字效果显示 | 🔴 | 50% | **飘字不出现** - Canvas 查找失败或位置计算错误 |
| 胜利界面动画 | ⏳ | 0% | 等待飘字问题解决 |
| 完整通关测试 | ⏳ | 0% | 12 节点全流程 |

### 🔴 发现的问题

1. **飘字效果不显示**
   - 原因：Canvas 可能未激活或 FindObjectOfType<Canvas>() 返回 null
   - 解决方案：已更新 DamagePopup.cs 增加更详细的诊断输出
   - 操作：参考 DEBUG_POPUP_FIX.md 中的修复步骤

2. **相关文件**
   - DamagePopup.cs - ✅ 已增强（Canvas 检查 + 诊断输出）
   - BattleManager.cs - 需添加诊断代码
   - 战斗场景 - 需验证 Canvas 存在

---

## 📍 周五剩余任务 (下午)

### 任务优先级

#### 🔥 **P0 - 立即修复** (1-2 小时)
```
1. 验证战斗场景中 Canvas 存在
2. 添加诊断代码追踪飘字生成
3. 测试飘字效果显示
4. 验证 4 种颜色 (红/橙/绿/蓝) 都能显示
```

#### 📊 **P1 - 存档系统测试** (2 小时)
```
1. 进入游戏 → 完成 1 个事件
2. 触发战斗，进行到第 2 回合
3. 记录资源值 (Belief/Grain/Armor)
4. 保存游戏
5. 关闭 Unity
6. 重新打开，加载存档
7. 验证资源值完全相同
8. 继续游戏，检查流程连贯性
```

#### 🎯 **P2 - 胜利界面优化** (1.5 小时)
```
1. 修改 UIManager.ShowVictoryScreen() 方法
2. 为 3 个战利品图标添加延迟弹出效果
3. 每个图标间隔 0.3 秒显示
4. 添加 scale-up 动画 (从 0.5 → 1.0)
5. 可选：添加 "弹出" 音效
```

#### ✅ **P3 - 通关验证** (1.5 小时)
```
1. 使用 Debug 工具快速跳过战斗 (Ctrl+K)
2. 完整走一遍 12 个节点
3. 验证每个节点正确加载
4. 检查资源计算无误
5. 到达结局，验证游戏完成
```

---

## 🎯 周六 (明天) 完整任务详情

**总工时**: 8 小时  
**目标**: Build 打包 + 测试 + 发布准备

### 上午 (9:00 - 12:00) - Build & 基础测试

#### 任务 1: 清理项目

**时间**: 30 分钟

```
1. Assets 文件夹
   ✓ 删除所有未使用的资源
   ✓ 删除临时测试文件
   
2. 脚本代码
   ✓ 注释掉所有 Debug.Log (或使用 UNITY_EDITOR 条件编译)
   ✓ 关闭 RuntimeDebugInput Debug 快捷键
   ✓ 确保 DebugPanel 默认不显示
   
3. ProjectSettings
   ✓ 检查 Graphics Quality Settings
   ✓ 检查 Physics/Physics2D Settings
   ✓ 验证所有必需的 Scenes 在 Build Settings 中
```

#### 任务 2: Build 配置

**时间**: 30 分钟

```
1. Player Settings (Edit → Project Settings → Player)
   ✓ Company Name: 西域行 Studio
   ✓ Product Name: 西域行 (WestPlan)
   ✓ Version: 1.0.0
   ✓ Icon: 设置游戏 icon
   
2. Build Settings (File → Build Settings)
   ✓ Platform: Windows 64-bit
   ✓ Scenes In Build:
     - 0: MainMenu
     - 1: Battle (或主游戏场景)
   ✓ Build Type: Development 或 Release (去掉 "Development Build")
   
3. Quality Settings
   ✓ Default Quality: High
   ✓ Anti-Aliasing: 4x
   ✓ Texture Quality: Full Res
```

#### 任务 3: First Build

**时间**: 30-60 分钟 (包括编译等待)

```
1. File → Build and Run (或 Build Only)
   ✓ 选择输出目录: WestPlan_Build/
   ✓ 生成文件名: WestPlan.exe
   
2. 首次 Build 检查项
   ✓ 编译是否成功? (查看 Build 窗口)
   ✓ 是否有 shader compile warning?
   ✓ .exe 文件大小是否正常 (50-200MB)?
   ✓ Build 目录下是否有必要的资源文件?
```

#### 任务 4: 基础功能测试

**时间**: 30 分钟

```
运行 .exe 文件：
1. 主菜单
   ✓ 按钮是否响应?
   ✓ 背景音乐是否播放?
   
2. 进入游戏
   ✓ 游戏能否成功启动?
   ✓ 第一个事件是否正确加载?
   ✓ UI 是否显示正常?
   
3. 战斗测试
   ✓ 战斗界面是否加载?
   ✓ 卡牌是否显示?
   ✓ 是否能点击操作?
   ✓ 飘字效果是否显示?
   
4. 退出游戏
   ✓ 能否正常退出?
   ✓ 是否报错?
```

---

### 下午 (13:30 - 17:30) - 完整测试 & 优化

#### 任务 5: 完整游戏流程测试

**时间**: 2 小时

```
启动 Build 版本，完整玩一遍游戏：

1. 新游戏 (New Game)
   ✓ 加载正常
   ✓ 初始资源值正确 (Belief=50, Grain=20, Armor=10)
   
2. 选择 12 个节点中的 1-2 个走一遍
   ✓ 事件加载正常
   ✓ 战斗流程完整
   ✓ 伤害飘字出现
   ✓ 战利品正确显示
   ✓ 资源更新无误
   
3. 测试 Save/Load
   ✓ 保存功能
   ✓ 重启游戏
   ✓ 加载存档
   ✓ 验证数据完整

4. 到达结局
   ✓ 结局动画是否播放
   ✓ 最终积分是否正确计算
```

#### 任务 6: 性能与稳定性测试

**时间**: 45 分钟

```
1. 性能监控
   ✓ FPS 是否稳定在 60+?
   ✓ 内存占用是否合理 (< 500MB)?
   ✓ CPU 占用是否正常?
   
2. 稳定性测试
   ✓ 快速连续操作是否卡顿?
   ✓ 长时间运行是否内存泄漏?
   ✓ 是否有 .exe 崩溃?
   
3. 兼容性检查
   ✓ 分辨率: 1280x720, 1920x1080 都能正常显示吗?
   ✓ 全屏 / 窗口模式切换是否正常?
```

#### 任务 7: Bug 修复与优化

**时间**: 1.5 小时

```
如果发现问题：
1. 记录 bug
   ✓ 标题、复现步骤、期望结果、实际结果
   
2. 在 Editor 中快速修复
   ✓ 修改代码
   ✓ 本地测试通过
   
3. Rebuild
   ✓ File → Build and Run
   ✓ 再次验证 bug 已修复
```

---

### 晚上 (17:30 - 18:00) - 最终检查 & 发布准备

#### 任务 8: 最终发布包准备

**时间**: 30 分钟

```
1. 生成发布版本
   ✓ Clean Build (删除旧 Build 文件夹)
   ✓ Build Release 版本 (不含 Debug info)
   
2. 打包发布文件
   ✓ 创建文件夹: WestPlan_v1.0.0_Release/
   ✓ 复制 .exe 和所有必要的 DLL、资源文件
   ✓ 添加 README.txt (游戏说明)
   ✓ 创建压缩包: WestPlan_v1.0.0.zip
   
3. 验证发布包
   ✓ 能否正常解压?
   ✓ .exe 能否独立运行?
   ✓ 是否包含所有资源?
```

#### 任务 9: 朋友 Beta 测试清单

**时间**: 15 分钟

```
准备交付物：
✓ WestPlan_v1.0.0.zip 发布包
✓ SETUP_GUIDE.txt (安装说明)
✓ GAMEPLAY_GUIDE.md (游戏操作指南)
✓ BUG_REPORT_TEMPLATE.txt (bug 反馈模板)
✓ 测试者联系方式确认

发送给朋友：
✓ 邮件或云盘分享
✓ 说明：这是 Beta 版本，请在 48 小时内反馈问题
✓ 反馈方式：钉钉群 / 微信群 / 邮件
```

---

## 🎬 周五周六总体流程图

```
周五 (今天)
├─ 上午 (9:00-12:30)
│  ├─ P0: 修复飘字系统 ⚠️ [重要]
│  ├─ P1: 存档系统完整测试
│  └─ 中午: 午餐休息
│
├─ 下午 (13:30-18:00)
│  ├─ P2: 胜利界面优化
│  ├─ P3: 12 节点完整通关测试
│  └─ 晚上: 整理文档，提交 Git

周六 (明天)
├─ 上午 (9:00-12:00)
│  ├─ 项目清理与优化
│  ├─ Build 配置与生成
│  └─ 基础功能验证
│
└─ 下午 (13:30-18:00)
   ├─ 完整游戏流程测试
   ├─ 性能与稳定性测试
   ├─ Bug 修复
   └─ 最终发布包准备
```

---

## ✅ 成功标志

**周五完成标志**:
- ✅ 飘字效果正常显示所有 4 种颜色
- ✅ Save/Load 系统数据完整性 100%
- ✅ 胜利界面有延迟弹出效果
- ✅ 12 节点全部可正常加载并完成

**周六完成标志**:
- ✅ .exe 文件成功生成
- ✅ Build 版本能完整玩一遍
- ✅ FPS 稳定在 60+
- ✅ 无严重 bug，所有功能正常
- ✅ 发布包准备就绪

---

## 🔗 相关文档

- [诊断指南](DEBUG_POPUP_FIX.md) - 飘字问题排查
- [周五详细计划](FRIDAY_PLAN.md) - 完整任务列表
- [验证清单](VERIFICATION_CHECKLIST.md) - 18 项质量检查
- [项目状态](PROJECT_STATUS.md) - 当前进度摘要

